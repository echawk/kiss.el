#!/usr/bin/emacs --script
;; -*- mode: emacs-lisp -*-
;; This is a CLI wrapper for the kiss.el library.

(require 'kiss)

(setq kiss-command (nth 0 argv))
(setq kiss-func (intern (concat "kiss-" kiss-command)))

(pcase kiss-command
  ("alternatives"
   (message "%s" (funcall kiss-func (nth 1 argv) (nth 2 argv))))

  ((or "build" "checksum" "download" "install" "list" "remove")
   (if (nthcdr 1 argv)
       (message "%s" (funcall kiss-func (nthcdr 1 argv)))
     (progn
       (funcall
        kiss-func
        (slot-value (kiss--dir-to-kiss-package default-directory) :name)))))

  ((or "manifest" "owns" "search")
   (message "%s" (funcall kiss-func (nth 1 argv))))

  ((or "preferred" "update" "upgrade")
   (message "%s" (funcall kiss-func))))
